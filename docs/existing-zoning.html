<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Rockbridge County Zoning Analysis - 4&nbsp; Existing zoning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./future-land-use.html" rel="next">
<link href="./current-land-use.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./existing-zoning.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Existing zoning</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Rockbridge County Zoning Analysis</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-collection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data collection</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./doc-review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Document review</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./current-land-use.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Current land use</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./existing-zoning.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Existing zoning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./future-land-use.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Future land use</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./subdivisions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Subdivisions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#rockbridge-county" id="toc-rockbridge-county" class="nav-link active" data-scroll-target="#rockbridge-county"><span class="header-section-number">4.1</span> Rockbridge County</a>
  <ul class="collapse">
  <li><a href="#residential-zoning-districts" id="toc-residential-zoning-districts" class="nav-link" data-scroll-target="#residential-zoning-districts"><span class="header-section-number">4.1.1</span> Residential zoning districts</a></li>
  <li><a href="#distribution" id="toc-distribution" class="nav-link" data-scroll-target="#distribution"><span class="header-section-number">4.1.2</span> Distribution</a></li>
  <li><a href="#development-potential" id="toc-development-potential" class="nav-link" data-scroll-target="#development-potential"><span class="header-section-number">4.1.3</span> Development potential</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis"><span class="header-section-number">4.1.4</span> Analysis</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Existing zoning</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This section examines current residential zoning patterns in each of the three localities. The towns of Glasgow and Goshen are not included.</p>
<section id="rockbridge-county" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="rockbridge-county"><span class="header-section-number">4.1</span> Rockbridge County</h2>
<section id="residential-zoning-districts" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="residential-zoning-districts"><span class="header-section-number">4.1.1</span> Residential zoning districts</h3>
<p>Rockbridge County has nine base zoning districts and five overlay districts.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-zoning-districts" class="anchored">
<div class="table-responsive">
<table class="table table-hover table-condensed table-sm table-striped small" data-quarto-postprocess="true">
<caption>Table&nbsp;4.1: Zoning districts in Rockbridge County</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Zone</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Overlay</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">C-1</td>
<td style="text-align: left;">Conservation</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Nonresidential</td>
</tr>
<tr class="even">
<td style="text-align: center;">A-1</td>
<td style="text-align: left;">Agricultural and Limited Uses</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Primarily Residential</td>
</tr>
<tr class="odd">
<td style="text-align: center;">A-2</td>
<td style="text-align: left;">Agricultural and General Uses</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Primarily Residential</td>
</tr>
<tr class="even">
<td style="text-align: center;">A-T</td>
<td style="text-align: left;">Agricultural Transitional</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Primarily Residential</td>
</tr>
<tr class="odd">
<td style="text-align: center;">R-1</td>
<td style="text-align: left;">Residential General</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Primarily Residential</td>
</tr>
<tr class="even">
<td style="text-align: center;">R-2</td>
<td style="text-align: left;">Residential Mixed</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Primarily Residential</td>
</tr>
<tr class="odd">
<td style="text-align: center;">B-1</td>
<td style="text-align: left;">General Business</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Mixed with Residential</td>
</tr>
<tr class="even">
<td style="text-align: center;">B-2</td>
<td style="text-align: left;">Planned Business</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Mixed with Residential</td>
</tr>
<tr class="odd">
<td style="text-align: center;">I-1</td>
<td style="text-align: left;">General Industrial</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Nonresidential</td>
</tr>
<tr class="even">
<td style="text-align: center;">FH-1</td>
<td style="text-align: left;">Flood Hazard</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Nonresidential</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Historical Overlay</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Mixed with Residential</td>
</tr>
<tr class="even">
<td style="text-align: center;">Agricultural/Forestal Overlay</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Mixed with Residential</td>
</tr>
<tr class="odd">
<td style="text-align: center;">TC-O</td>
<td style="text-align: left;">Tourism Corridor Overlay</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Mixed with Residential</td>
</tr>
<tr class="even">
<td style="text-align: center;">Source Water Protection Overlay</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Mixed with Residential</td>
</tr>
</tbody>
</table>
</div>
</div>


</div>
</div>
<p>Of those nine base districts, all but two (C-1 and I-1) allow some form residential uses either by right, conditionally, or via special exemption.</p>
<p>The table below shows the allowances for different residential uses in those seven districts.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-residential-uses" class="anchored">
<div class="table-responsive">
<table class="table table-hover table-condensed table-sm table-striped small" data-quarto-postprocess="true">
<caption>Table&nbsp;4.2: Residential use allowances</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Zone</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">SF detached</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Townhome</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Duplex</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Multifamily</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">MH</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">MHP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A-1</td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #259591 !important;">A</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #8b85ca !important;">C</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">A-2</td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #259591 !important;">A</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #8b85ca !important;">C</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #e0592a !important;">S</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">A-T</td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #259591 !important;">A</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #e0592a !important;">S</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #e0592a !important;">S</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #8b85ca !important;">C</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #e0592a !important;">S</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">R-1</td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #259591 !important;">A</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #259591 !important;">A</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #8b85ca !important;">C</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">R-2</td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #259591 !important;">A</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #8b85ca !important;">C</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #259591 !important;">A</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #259591 !important;">A</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #8b85ca !important;">C</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">B-1</td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #8b85ca !important;">C</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #8b85ca !important;">C</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #8b85ca !important;">C</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #e0592a !important;">S</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">B-2</td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #e0592a !important;">S</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #e0592a !important;">S</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #e0592a !important;">S</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #e0592a !important;">S</span></td>
<td style="text-align: center;"><span style=" font-weight: bold;    color: #b1005f !important;">P</span></td>
</tr>
</tbody>
</table>
</div>
</div>


</div>
</div>
<p>Allowance key:</p>
<ul>
<li>A = Allowed by-right</li>
<li>C = Conditional (by-right if additional conditions met)</li>
<li>S = Special exception (permit application and public hearing required)</li>
<li>P = Prohibited</li>
</ul>
<p>Residential use definitions:</p>
<ul>
<li>SF detached = Single-family home with no walls shared with other dwelling units</li>
<li>Townhome = Single-family home with at least one wall shared with other dwelling unit</li>
<li>Duplex = Building with two separate dwelling units</li>
<li>Multifamily = Building with three or more separate dwelling units</li>
<li>MH = Manufactured home (built off-site in accordance with federal codes)</li>
<li>MHP = Manufactured home park (development with three or more manufactured homes on leased lots)</li>
</ul>
<p><strong>Single-family detached</strong> homes are by-right in five of the seven districts. In B-1, they are conditionally permitted by-right if the structure meets the “area and setback requirements of the R-2 District if public water and sewer are available or the R-1 District if on a private drainfield and well or public water” [605.02-04]. This same rule applies to B-2; however, all B-2 developments must be approved via special exemption.</p>
<p><strong>Townhomes</strong> are only allowed conditionally in the R-2 district, and prohibited in all other zones. Townhome developments must meet special regulations found in section 709 of the zoning ordinance to be approved by-right.</p>
<p><strong>Duplexes</strong> are by-right in R-1 and R-2 and conditional in B-1, where the same area, setback, and utility requirements apply as described for single-family homes above. Duplexes are allowed via special exception in A-T and B-2.</p>
<p><strong>Multifamily</strong> developments are by-right only in R-2. In B-1, multifamily is possible only via apartments or condos included as basement or upper-story units included in structures that include other permitted uses. At least 90% of street-level space must be non-residential. Multifamily is possible via special exception in A-T and B-2.</p>
<p><strong>Manufactured homes</strong> are allowed in all districts other than B-1 and B-2 if conditions in section 707 are met. That section requires new units be built according to HUD code (no pre-1976 units), placed on permanent foundation, titled as real estate, among other stipulations. Manufactured homes are allowed only via special exception in B-1 and B-2.</p>
<p><strong>Manufactured home parks</strong> are prohibited in all districts except for A-2 and A-T, where they are allowed only via special exception. New MHP developments must meet the design and site plan requirements outlined in sections 707.02 through 707.06.</p>
</section>
<section id="distribution" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="distribution"><span class="header-section-number">4.1.2</span> Distribution</h3>
<ul>
<li>Residential zoning by parcel</li>
<li>Residential zoning by land area</li>
</ul>
</section>
<section id="development-potential" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="development-potential"><span class="header-section-number">4.1.3</span> Development potential</h3>
<ul>
<li>Maps of where each housing type can be built by-right (and/or conditionally)</li>
</ul>
</section>
<section id="analysis" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="analysis"><span class="header-section-number">4.1.4</span> Analysis</h3>
<p>The existing zoning ordinance dictating land use and development in Rockbridge County has not been comprehensively rewritten since 1982. At this time, the County population was 17,856—about 5,000 people less than its population today.</p>
<p>Since 1982, amendments have been made to the zoning code to address cases and uses not originally considered, but the overall form of the zoning code remains unchanged.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./current-land-use.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Current land use</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./future-land-use.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Future land use</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>